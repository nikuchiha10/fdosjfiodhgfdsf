# -*- coding: utf-8 -*-
"""
–°–ò–°–¢–ï–ú–ê –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫ –ø–∞—Ä—Å–µ—Ä–∞
"""

import time
from datetime import datetime, timedelta
from typing import Dict, List, Any, Optional
from dataclasses import dataclass
import threading

from config import –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
from utils import –õ–æ–≥–≥–µ—Ä, –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤—â–∏–∫


@dataclass
class –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°—Ç–∞—Ç—å–∏:
    """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏"""
    –∑–∞–≥–æ–ª–æ–≤–æ–∫: str
    url: str
    –≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞: datetime
    –≤—Ä–µ–º—è_–æ–∫–æ–Ω—á–∞–Ω–∏—è: Optional[datetime] = None
    –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤: int = 0
    —Å—Ç–∞—Ç—É—Å: str = "–≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ"
    –æ—à–∏–±–∫–∞: Optional[str] = None
    
    @property
    def –≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏(self) -> float:
        """–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç—å–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö"""
        if self.–≤—Ä–µ–º—è_–æ–∫–æ–Ω—á–∞–Ω–∏—è:
            return (self.–≤—Ä–µ–º—è_–æ–∫–æ–Ω—á–∞–Ω–∏—è - self.–≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞).total_seconds()
        return (datetime.now() - self.–≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞).total_seconds()


class –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–í–†–µ–∞–ª—å–Ω–æ–º–í—Ä–µ–º–µ–Ω–∏:
    """–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞"""
    
    def __init__(self):
        self.–≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞ = datetime.now()
        self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏: List[–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°—Ç–∞—Ç—å–∏] = []
        self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è: Optional[–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°—Ç–∞—Ç—å–∏] = None
        self.–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤ = 0
        self.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫ = 0
        self.–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏ = 0
        self.–ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ_–ø—Ä–æ–≥—Ä–µ—Å—Å–∞ = 0
        self.–ª–æ–≥–≥–µ—Ä = –õ–æ–≥–≥–µ—Ä()
        self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ = threading.Lock()
    
    def –Ω–∞—á–∞—Ç—å_–æ–±—Ä–∞–±–æ—Ç–∫—É_—Å—Ç–∞—Ç—å–∏(self, –∑–∞–≥–æ–ª–æ–≤–æ–∫: str, url: str):
        """
        –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏
        
        Args:
            –∑–∞–≥–æ–ª–æ–≤–æ–∫: –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏
            url: URL —Å—Ç–∞—Ç—å–∏
        """
        with self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
            self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è = –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–°—Ç–∞—Ç—å–∏(
                –∑–∞–≥–æ–ª–æ–≤–æ–∫=–∑–∞–≥–æ–ª–æ–≤–æ–∫,
                url=url,
                –≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞=datetime.now()
            )
    
    def –∑–∞–≤–µ—Ä—à–∏—Ç—å_–æ–±—Ä–∞–±–æ—Ç–∫—É_—Å—Ç–∞—Ç—å–∏(self, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤: int = 0, –æ—à–∏–±–∫–∞: str = None):
        """
        –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç—å–∏
        
        Args:
            –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
            –æ—à–∏–±–∫–∞: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –µ—Å–ª–∏ –µ—Å—Ç—å
        """
        with self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
            if self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è:
                self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è.–≤—Ä–µ–º—è_–æ–∫–æ–Ω—á–∞–Ω–∏—è = datetime.now()
                self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤
                self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è.—Å—Ç–∞—Ç—É—Å = "–æ—à–∏–±–∫–∞" if –æ—à–∏–±–∫–∞ else "—É—Å–ø–µ—à–Ω–æ"
                self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è.–æ—à–∏–±–∫–∞ = –æ—à–∏–±–∫–∞
                
                self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏.append(self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è)
                self.–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤ += –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤
                
                if –æ—à–∏–±–∫–∞:
                    self.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫ += 1
                
                self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è = None
    
    def –¥–æ–±–∞–≤–∏—Ç—å_–∑–∞–∫—Ä—ã—Ç—É—é_–≤–∫–ª–∞–¥–∫—É(self):
        """–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç—ã—Ö –≤–∫–ª–∞–¥–æ–∫"""
        with self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
            self.–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏ += 1
    
    def –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—É—â–∏–π_–ø—Ä–æ–≥—Ä–µ—Å—Å(self) -> Dict[str, Any]:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        
        Returns:
            Dict: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        """
        with self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
            —Ç–µ–∫—É—â–µ–µ_–≤—Ä–µ–º—è = datetime.now()
            –ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è = (—Ç–µ–∫—É—â–µ–µ_–≤—Ä–µ–º—è - self.–≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞).total_seconds()
            
            –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π = len(self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏)
            —Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ = –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.–¶–ï–õ–ï–í–û–ï_–ö–û–õ–ò–ß–ï–°–¢–í–û_–°–¢–ê–¢–ï–ô
            
            # –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            –ø—Ä–æ—Ü–µ–Ω—Ç_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è = min(100, (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π / —Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) * 100) if —Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ > 0 else 0
            
            # –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
            —Å–∫–æ—Ä–æ—Å—Ç—å = 0
            if –ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è > 0:
                —Å–∫–æ—Ä–æ—Å—Ç—å = –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π / (–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è / 60)  # —Å—Ç–∞—Ç–µ–π –≤ –º–∏–Ω—É—Ç—É
            
            # –†–∞—Å—á–µ—Ç –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏
            –æ—Å—Ç–∞–≤—à–µ–µ—Å—è_–≤—Ä–µ–º—è = 0
            if —Å–∫–æ—Ä–æ—Å—Ç—å > 0:
                –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è_—Å—Ç–∞—Ç–µ–π = —Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π
                –æ—Å—Ç–∞–≤—à–µ–µ—Å—è_–≤—Ä–µ–º—è = –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è_—Å—Ç–∞—Ç–µ–π / —Å–∫–æ—Ä–æ—Å—Ç—å  # –≤ –º–∏–Ω—É—Ç–∞—Ö
            
            return {
                "–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π": –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π,
                "—Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ": —Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ,
                "–ø—Ä–æ—Ü–µ–Ω—Ç_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è": round(–ø—Ä–æ—Ü–µ–Ω—Ç_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, 1),
                "–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è": –ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è,
                "–æ—Å—Ç–∞–≤—à–µ–µ—Å—è_–≤—Ä–µ–º—è": –æ—Å—Ç–∞–≤—à–µ–µ—Å—è_–≤—Ä–µ–º—è,
                "—Å–∫–æ—Ä–æ—Å—Ç—å": round(—Å–∫–æ—Ä–æ—Å—Ç—å, 1),
                "–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤": self.–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤,
                "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫": self.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫,
                "–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏": self.–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏,
                "—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è": self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è.–∑–∞–≥–æ–ª–æ–≤–æ–∫ if self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è else None
            }
    
    def –Ω—É–∂–Ω–æ_–æ–±–Ω–æ–≤–∏—Ç—å_–ø—Ä–æ–≥—Ä–µ—Å—Å(self) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        
        Returns:
            bool: True –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        """
        –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π = len(self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏)
        
        if –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π - self.–ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ_–ø—Ä–æ–≥—Ä–µ—Å—Å–∞ >= –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.–ò–ù–¢–ï–†–í–ê–õ_–û–ë–ù–û–í–õ–ï–ù–ò–Ø_–ü–†–û–ì–†–ï–°–°–ê:
            self.–ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ_–ø—Ä–æ–≥—Ä–µ—Å—Å–∞ = –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π
            return True
        
        return False
    
    def –ø–æ–ª—É—á–∏—Ç—å_–¥–µ—Ç–∞–ª—å–Ω—É—é_—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É(self) -> Dict[str, Any]:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
        
        Returns:
            Dict: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        """
        –ø—Ä–æ–≥—Ä–µ—Å—Å = self.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—É—â–∏–π_–ø—Ä–æ–≥—Ä–µ—Å—Å()
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç–µ–π
        –≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏ = [—Å—Ç.–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏ for —Å—Ç in self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏ if —Å—Ç.–≤—Ä–µ–º—è_–æ–∫–æ–Ω—á–∞–Ω–∏—è]
        
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = {
            **–ø—Ä–æ–≥—Ä–µ—Å—Å,
            "—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏": sum(–≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏) / len(–≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏) if –≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏ else 0,
            "–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏": max(–≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏) if –≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏ else 0,
            "–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏": min(–≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏) if –≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏ else 0,
            "—É—Å–ø–µ—à–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏": len([—Å—Ç for —Å—Ç in self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏ if —Å—Ç.—Å—Ç–∞—Ç—É—Å == "—É—Å–ø–µ—à–Ω–æ"]),
            "—Å—Ç–∞—Ç—å–∏_—Å_–æ—à–∏–±–∫–∞–º–∏": len([—Å—Ç for —Å—Ç in self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏ if —Å—Ç.—Å—Ç–∞—Ç—É—Å == "–æ—à–∏–±–∫–∞"]),
            "–æ–±—â–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏": sum(–≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏) if –≤—Ä–µ–º–µ–Ω–∞_–æ–±—Ä–∞–±–æ—Ç–∫–∏ else 0
        }
        
        return —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    
    def —Å–æ–∑–¥–∞—Ç—å_–æ—Ç—á–µ—Ç_–ø—Ä–æ–≥—Ä–µ—Å—Å–∞(self) -> str:
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
        
        Returns:
            str: –¢–µ–∫—Å—Ç –æ—Ç—á–µ—Ç–∞
        """
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = self.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—É—â–∏–π_–ø—Ä–æ–≥—Ä–µ—Å—Å()
        
        –æ—Ç—á–µ—Ç = "üìä –¢–ï–ö–£–©–ò–ô –ü–†–û–ì–†–ï–°–° –ü–ê–†–°–ò–ù–ì–ê:\n\n"
        –æ—Ç—á–µ—Ç += f"‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç–∞—Ç–µ–π: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π']}/{—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Ü–µ–ª–µ–≤–æ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ']}\n"
        –æ—Ç—á–µ—Ç += f"üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–ø—Ä–æ—Ü–µ–Ω—Ç_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è']}%\n"
        –æ—Ç—á–µ—Ç += f"‚è±Ô∏è –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: {–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤—â–∏–∫.—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å_–≤—Ä–µ–º—è(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è'])}\n"
        –æ—Ç—á–µ—Ç += f"‚è≥ –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: ~{—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ—Å—Ç–∞–≤—à–µ–µ—Å—è_–≤—Ä–µ–º—è']:.1f} –º–∏–Ω\n"
        –æ—Ç—á–µ—Ç += f"‚ö° –°–∫–æ—Ä–æ—Å—Ç—å: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å–∫–æ—Ä–æ—Å—Ç—å']} —Å—Ç–∞—Ç–µ–π/–º–∏–Ω\n"
        –æ—Ç—á–µ—Ç += f"üìë –ù–∞–π–¥–µ–Ω–æ —Ä–∞–∑–¥–µ–ª–æ–≤: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤']}\n"
        –æ—Ç—á–µ—Ç += f"‚ùå –û—à–∏–±–∫–∏: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫']}\n"
        –æ—Ç—á–µ—Ç += f"üñ•Ô∏è –ó–∞–∫—Ä—ã—Ç–æ –≤–∫–ª–∞–¥–æ–∫: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏']}\n"
        
        if —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è']:
            –æ—Ç—á–µ—Ç += f"\nüîç –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç—å—è: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è'][:50]}..."
        
        return –æ—Ç—á–µ—Ç
    
    def —Å–æ–∑–¥–∞—Ç—å_—Ñ–∏–Ω–∞–ª—å–Ω—ã–π_–æ—Ç—á–µ—Ç(self) -> str:
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
        
        Returns:
            str: –¢–µ–∫—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
        """
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = self.–ø–æ–ª—É—á–∏—Ç—å_–¥–µ—Ç–∞–ª—å–Ω—É—é_—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É()
        
        –æ—Ç—á–µ—Ç = "‚úÖ –ü–ê–†–°–ò–ù–ì –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù!\n\n"
        –æ—Ç—á–µ—Ç += "üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π']}\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—É—Å–ø–µ—à–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏']}\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –° –æ—à–∏–±–∫–∞–º–∏: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ç–∞—Ç—å–∏_—Å_–æ—à–∏–±–∫–∞–º–∏']}\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤']}\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –û–±—â–µ–µ –≤—Ä–µ–º—è: {–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤—â–∏–∫.—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å_–≤—Ä–µ–º—è(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è'])}\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å–∫–æ—Ä–æ—Å—Ç—å']} —Å—Ç–∞—Ç–µ–π/–º–∏–Ω\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å—Ç–∞—Ç—å—é: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏']:.1f} —Å–µ–∫\n"
        –æ—Ç—á–µ—Ç += f"‚Ä¢ –ó–∞–∫—Ä—ã—Ç–æ –≤–∫–ª–∞–¥–æ–∫: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏']}\n"
        
        # –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        if —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è'] > 0:
            —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å = (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π'] / —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–ø—Ä–æ—à–µ–¥—à–µ–µ_–≤—Ä–µ–º—è']) * 60
            –æ—Ç—á–µ—Ç += f"‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:.1f} —Å—Ç–∞—Ç–µ–π/—á–∞—Å\n"
        
        –æ—Ç—á–µ—Ç += f"\nüìÅ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.–ü–£–¢–¨_–°–û–•–†–ê–ù–ï–ù–ò–Ø_–§–ê–ô–õ–ê}"
        
        return –æ—Ç—á–µ—Ç
    
    def —Å–±—Ä–æ—Å–∏—Ç—å_–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥(self):
        """–°–±—Ä–æ—Å –≤—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
        with self.–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
            self.–≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞ = datetime.now()
            self.–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ_—Å—Ç–∞—Ç—å–∏ = []
            self.—Ç–µ–∫—É—â–∞—è_—Å—Ç–∞—Ç—å—è = None
            self.–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ä–∞–∑–¥–µ–ª–æ–≤ = 0
            self.–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫ = 0
            self.–∑–∞–∫—Ä—ã—Ç—ã–µ_–≤–∫–ª–∞–¥–∫–∏ = 0
            self.–ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ_–ø—Ä–æ–≥—Ä–µ—Å—Å–∞ = 0


class –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
    """–ö–ª–∞—Å—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞"""
    
    def __init__(self, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–í–†–µ–∞–ª—å–Ω–æ–º–í—Ä–µ–º–µ–Ω–∏):
        self.–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ = –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
        self.–ª–æ–≥–≥–µ—Ä = –õ–æ–≥–≥–µ—Ä()
        self.–º–µ—Ç—Ä–∏–∫–∏ = {
            "–≤—Ä–µ–º–µ–Ω–Ω—ã–µ_–æ—Ç–º–µ—Ç–∫–∏": [],
            "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_–ø–∞–º—è—Ç–∏": [],
            "—Å–∫–æ—Ä–æ—Å—Ç—å_–æ–±—Ä–∞–±–æ—Ç–∫–∏": []
        }
    
    def –¥–æ–±–∞–≤–∏—Ç—å_–º–µ—Ç—Ä–∏–∫—É(self, —Ç–∏–ø: str, –∑–Ω–∞—á–µ–Ω–∏–µ: float):
        """
        –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        
        Args:
            —Ç–∏–ø: –¢–∏–ø –º–µ—Ç—Ä–∏–∫–∏
            –∑–Ω–∞—á–µ–Ω–∏–µ: –ó–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏
        """
        if —Ç–∏–ø in self.–º–µ—Ç—Ä–∏–∫–∏:
            self.–º–µ—Ç—Ä–∏–∫–∏[—Ç–∏–ø].append({
                "–≤—Ä–µ–º—è": datetime.now(),
                "–∑–Ω–∞—á–µ–Ω–∏–µ": –∑–Ω–∞—á–µ–Ω–∏–µ
            })
    
    def –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å_–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å(self) -> Dict[str, Any]:
        """
        –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞
        
        Returns:
            Dict: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
        """
        —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ = self.–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.–ø–æ–ª—É—á–∏—Ç—å_–¥–µ—Ç–∞–ª—å–Ω—É—é_—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É()
        
        –∞–Ω–∞–ª–∏–∑ = {
            "–æ–±—â–∞—è_–æ—Ü–µ–Ω–∫–∞": "–æ—Ç–ª–∏—á–Ω–æ",
            "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": [],
            "–ø—Ä–æ–±–ª–µ–º—ã": []
        }
        
        # –ê–Ω–∞–ª–∏–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏
        if —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å–∫–æ—Ä–æ—Å—Ç—å'] < 1:
            –∞–Ω–∞–ª–∏–∑['–æ–±—â–∞—è_–æ—Ü–µ–Ω–∫–∞'] = "–Ω–∏–∑–∫–∞—è"
            –∞–Ω–∞–ª–∏–∑['–ø—Ä–æ–±–ª–µ–º—ã'].append("–°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (< 1 —Å—Ç–∞—Ç—å—è/–º–∏–Ω)")
        elif —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å–∫–æ—Ä–æ—Å—Ç—å'] < 2:
            –∞–Ω–∞–ª–∏–∑['–æ–±—â–∞—è_–æ—Ü–µ–Ω–∫–∞'] = "—Å—Ä–µ–¥–Ω—è—è"
            –∞–Ω–∞–ª–∏–∑['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏'].append("–ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏")
        else:
            –∞–Ω–∞–ª–∏–∑['–æ–±—â–∞—è_–æ—Ü–µ–Ω–∫–∞'] = "–æ—Ç–ª–∏—á–Ω–∞—è"
        
        # –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
        –ø—Ä–æ—Ü–µ–Ω—Ç_–æ—à–∏–±–æ–∫ = (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–æ—à–∏–±–æ–∫'] / —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π'] * 100) if —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ_—Å—Ç–∞—Ç–µ–π'] > 0 else 0
        if –ø—Ä–æ—Ü–µ–Ω—Ç_–æ—à–∏–±–æ–∫ > 10:
            –∞–Ω–∞–ª–∏–∑['–æ–±—â–∞—è_–æ—Ü–µ–Ω–∫–∞'] = "–ø—Ä–æ–±–ª–µ–º–Ω–∞—è"
            –∞–Ω–∞–ª–∏–∑['–ø—Ä–æ–±–ª–µ–º—ã'].append(f"–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫: {–ø—Ä–æ—Ü–µ–Ω—Ç_–æ—à–∏–±–æ–∫:.1f}%")
        elif –ø—Ä–æ—Ü–µ–Ω—Ç_–æ—à–∏–±–æ–∫ > 5:
            –∞–Ω–∞–ª–∏–∑['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏'].append(f"–£–º–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫: {–ø—Ä–æ—Ü–µ–Ω—Ç_–æ—à–∏–±–æ–∫:.1f}%")
        
        # –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        if —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏'] > 10:
            –∞–Ω–∞–ª–∏–∑['–ø—Ä–æ–±–ª–µ–º—ã'].append(f"–í—ã—Å–æ–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏']:.1f} —Å–µ–∫")
        elif —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏'] > 5:
            –∞–Ω–∞–ª–∏–∑['—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏'].append(f"–£–º–µ—Ä–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: {—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞['—Å—Ä–µ–¥–Ω–µ–µ_–≤—Ä–µ–º—è_–æ–±—Ä–∞–±–æ—Ç–∫–∏']:.1f} —Å–µ–∫")
        
        return –∞–Ω–∞–ª–∏–∑


# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ = –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–í–†–µ–∞–ª—å–Ω–æ–º–í—Ä–µ–º–µ–Ω–∏()
